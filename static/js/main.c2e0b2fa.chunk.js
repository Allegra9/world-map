(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{139:function(e,t,a){e.exports=a(283)},144:function(e,t,a){},283:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(43),l=a.n(o),i=a(135),c=a(91),s=(a(144),a(66),a(17)),u=a(18),d=a(20),p=a(19),h=a(21),m=a(22),g=a(125),f=a(62),y=a.n(f),v=a(138),b=a(126),C=a(51),E=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={country:a.props.country,data:[],data2050:[]},a.getData=function(e,t){console.log(e,t);var n,r,o=[],l=[],i=[],c=[];t.map(function(e){e.age<15&&o.push(e.total),e.age>=15&&e.age<25&&l.push(e.total),e.age>=25&&e.age<65&&i.push(e.total),e.age>65&&c.push(e.total),100===e.age&&(n=e.total)});var s=function(e,t){return e+t};console.log(o.reduce(s)),console.log(l.reduce(s)),console.log(i.reduce(s)),console.log(c.reduce(s)),console.log(n),r=[{key:"0-14",value:o.reduce(s),color:"pink"},{key:"15-24",value:l.reduce(s),color:"pink"},{key:"25-64",value:i.reduce(s),color:"blue"},{key:"65+",value:c.reduce(s),color:"navy"}],2018===e?a.setState({data:r},function(){return console.log(a.state.data)}):a.setState({data2050:r},function(){return console.log(a.state.data2050)})},a.fetchAgeData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"2018",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Lithuania";return fetch("http://54.72.28.201/1.0/population/".concat(e,"/").concat(t,"/")).then(function(e){return e.json()}).then(function(t){return a.getData(e,t)})},a.getSelectedCountriesData=function(e){console.log("getSelectedCountriesData:",e),a.fetchAgeData(2018,e),a.fetchAgeData(2050,e)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){console.log("Country I'm fetching for: ",this.props.country),this.getSelectedCountriesData(this.props.country)}},{key:"componentDidUpdate",value:function(e){e.country!==this.props.country&&(console.log("Country I'm fetching for: ",this.props.country),this.getSelectedCountriesData(this.props.country))}},{key:"render",value:function(){var e={table:{border:"1px #000 solid",borderRadius:"10px",marginTop:"100px",marginLeft:"5%",marginRight:"5%",padding:"50px",display:"grid",gridTemplateColumns:"auto auto",overflow:"auto"},pie:{display:"inline-block",margin:"0 auto"},h2:{textAlign:"center",gridColumnStart:"1",gridColumnEnd:"3"}};return r.a.createElement("div",{style:e.table},r.a.createElement("h2",{style:e.h2},this.props.country," Age Dependency charts"),r.a.createElement("div",{style:e.pie,class:"pie"},r.a.createElement("h4",null,"2018 (estimated):"),r.a.createElement(C.PieChart,{labels:!0,size:300,innerHoleSize:100,data:this.state.data})),r.a.createElement("div",{style:e.pie,class:"pie"},r.a.createElement("h4",null,"2050 (projected):"),r.a.createElement(C.PieChart,{labels:!0,size:301,innerHoleSize:100,data:this.state.data2050})))}}]),t}(n.Component),D=function(e){var t=e.mapData,a=e.countryClick,n=e.countryClicked;Object(v.a)(e,["mapData","countryClick","countryClicked"]);return r.a.createElement("div",null,r.a.createElement(b.VectorMap,{map:"world_mill",backgroundColor:"transparent",zoomOnScroll:!1,containerStyle:{width:"100%",height:"520px"},onRegionClick:function(e,t){console.log(t),a(t)},containerClassName:"map",regionStyle:{initial:{fill:"#e4e4e4","fill-opacity":.9,stroke:"none","stroke-width":0,"stroke-opacity":0},hover:{"fill-opacity":.8,cursor:"pointer"},selected:{fill:"#2938bc"},selectedHover:{}},regionsSelectable:!0,series:{regions:[{values:t,scale:["#146804","#ff0000"],normalizeFunction:"polynomial"}]}}),n.length>0?"Greenland"!==n&&"Venezuela, Bolivarian Republic of"!==n&&"Bolivia, Plurinational State of"!==n&&"Iran, Islamic Republic of"!==n&&"Egypt"!==n&&"Tanzania, United Republic of"!==n&&"Yemen"!==n&&"Syrian Arab Republic"!==n&&"Congo, the Democratic Republic of the"!==n&&"C\xf4te d'Ivoire"!==n&&"Korea, Republic of"!==n&&"Korea, Democratic People's Republic of"!==n&&"Viet Nam"!==n&&"Lao People's Democratic Republic"!==n&&"Moldova, Republic of"!==n&&"Macedonia, the Former Yugoslav Republic of"!==n&&"Netherlands"!==n&&"Taiwan, Province of China"!==n&&"Slovakia"!==n&&"Kosovo"!==n?r.a.createElement(E,{country:n}):r.a.createElement("h2",{style:{textAlign:"center"}},"No data for ",n):null)},k=a(55),O=a(44),j=a.n(O),w=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={countries:[],daily:[],weekly:[],yearly:[],in10yrs:[],reducedDaily:null},a.getState=function(){a.setState({countries:a.sortedCountries(),daily:a.sortedProps(),weekly:a.getWeekly(),yearly:a.getYearly(),in10yrs:a.get10Years(),reducedDaily:a.reducedDaily()})},a.reducedDaily=function(){return a.sortedProps().reduce(function(e,t){return e+t})},a.sortedCountries=function(){var e=Object(k.a)({},a.props.growthDaily),t=Object.values(e).sort(function(e,t){return t-e});console.log(t);var n=[];t.forEach(function(t){n.push(a.getKeyByValue(e,t))}),console.log(n.length);var r=a.flattenArray(n);return console.log(a.getUniqArray(r)),a.getUniqArray(r)},a.getKeyByValue=function(e,t){return Object.keys(e).filter(function(a){return e[a]===t})},a.flattenArray=function(e){return e.reduce(function(e,t){return e.concat(t)},[])},a.getUniqArray=function(e){return e.filter(function(e,t,a){return a.indexOf(e)===t})},a.sortedProps=function(){var e=Object(k.a)({},a.props.growthDaily);return Object.values(e).sort(function(e,t){return t-e})},a.getWeekly=function(){var e=a.sortedProps();return Object.entries(e).forEach(function(t){var a=Object(m.a)(t,2),n=a[0],r=a[1];e[n]=7*r}),e},a.getYearly=function(){var e=a.sortedProps();return Object.entries(e).forEach(function(t){var a=Object(m.a)(t,2),n=a[0],r=a[1];e[n]=365*r}),e},a.get10Years=function(){var e=a.sortedProps();return Object.entries(e).forEach(function(t){var a=Object(m.a)(t,2),n=a[0],r=a[1];e[n]=3650*r}),e},a.getAFlag=function(e){return"Congo"===e?j.a.find(function(e){return"DR Congo"===e.name.common}).flag:"Czech Republic"===e?j.a.find(function(e){return"Czechia"===e.name.common}).flag:"Brunei Darussalam"===e?j.a.find(function(e){return"Brunei"===e.name.common}).flag:"Sao Tome and Principe"===e?j.a.find(function(e){return"S\xe3o Tom\xe9 and Pr\xedncipe"===e.name.common}).flag:"Russian Federation"===e?j.a.find(function(e){return"Russia"===e.name.common}).flag:j.a.find(function(t){return t.name.common===e}).flag},a.handleClick=function(e){a.props.selectCountry(e.target.id),console.log(e.target.id)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getState()}},{key:"render",value:function(){var e=this,t=Object.values(this.state.countries),a=Object.values(this.state.daily),n=Object.values(this.state.weekly),o=Object.values(this.state.yearly),l=Object.values(this.state.in10yrs),i={gridContainer:{display:"grid",gridTemplateColumns:"auto auto auto auto auto",width:"60%",marginLeft:"auto",marginRight:"auto"},countryColumn:{width:"300px",border:"1px #000 solid",margin:"50px 0",borderRadius:"10px 0 0 10px",background:"linear-gradient(0deg, rgba(34,195,45,1) 13%, rgba(253,45,45,1) 100%)"},dataColumn:{width:"150px",border:"1px #000 solid",margin:"50px 0",background:"linear-gradient(0deg, rgba(34,195,45,1) 13%, rgba(253,45,45,1) 100%)"},dataColumn4:{width:"150px",border:"1px #000 solid",margin:"50px 0",borderRadius:"0 10px 10px 0",background:"linear-gradient(0deg, rgba(34,195,45,1) 13%, rgba(253,45,45,1) 100%)"},ul:{listStyle:"none",textAlign:"right",paddingRight:"20px"},ulCountries:{listStyle:"none"},li:{borderBottom:"1px #000 solid",padding:"4px"},liCountry:{borderBottom:"1px #000 solid",cursor:"pointer"},topDiv:{padding:"15px",width:"65%",marginLeft:"auto",marginRight:"auto",marginTop:"50px",textAlign:"center",borderBottom:"1px #000 solid"},span:{padding:"15px",marginLeft:"8px",fontWeight:"900",color:"red"}};return r.a.createElement("div",null,r.a.createElement("div",{style:i.topDiv},r.a.createElement("p",{className:"subtitle"},"Current world's population growth is",r.a.createElement("span",{style:i.span},this.state.reducedDaily)," people per day,",r.a.createElement("span",{style:i.span},Math.floor(7*this.state.reducedDaily))," ","per week,",r.a.createElement("span",{style:i.span},Math.floor(360*this.state.reducedDaily))," ","per year.")),r.a.createElement("div",{style:i.gridContainer},r.a.createElement("span",{style:i.countryColumn},r.a.createElement("ul",{style:i.ulCountries},r.a.createElement("li",null,r.a.createElement("h3",{className:"subtitle"},"Country")),t.map(function(t){return r.a.createElement("li",{style:i.liCountry,id:t,onClick:e.handleClick,className:"subtitle-link"},e.getAFlag(t)," ",t)}))),r.a.createElement("span",{style:i.dataColumn},r.a.createElement("ul",{style:i.ul},r.a.createElement("li",null,r.a.createElement("h3",{className:"subtitle"},"Daily")),a.map(function(e){return r.a.createElement("li",{style:i.li},e.toLocaleString())}))),r.a.createElement("span",{style:i.dataColumn},r.a.createElement("ul",{style:i.ul},r.a.createElement("li",null,r.a.createElement("h3",{className:"subtitle"},"Weekly")),n.map(function(e){return r.a.createElement("li",{style:i.li},e.toLocaleString())}))),r.a.createElement("span",{style:i.dataColumn},r.a.createElement("ul",{style:i.ul},r.a.createElement("li",null,r.a.createElement("h3",{className:"subtitle"},"Yearly")),o.map(function(e){return r.a.createElement("li",{style:i.li},e.toLocaleString())}))),r.a.createElement("span",{style:i.dataColumn4},r.a.createElement("ul",{style:i.ul},r.a.createElement("li",null,r.a.createElement("h3",{className:"subtitle"},"10 years")),l.map(function(e){return r.a.createElement("li",{style:i.li},e.toLocaleString())})))))}}]),t}(r.a.Component),x=a(93),S=a(137),N=[],A=[],R=[],P=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={interpolation:"linear",polar:!1,totalPopChartData:[],totalMalesChartData:[],totalFemalesChartData:[],selectedOption:"",loading:!0},a.fetchDecadesData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"2018",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Lithuania";return fetch("http://54.72.28.201:80/1.0/population/"+"".concat(e,"/").concat(t,"/")).then(function(e){return e.json()}).then(function(t){return a.getReducedValueForEachYear(e,t)}).then(function(){return a.setState({loading:!1})})},a.getReducedValueForEachYear=function(e,t){var n=[],r=[],o=[];t.map(function(e){n.push(e.total/1e6),r.push(e.males/1e6),o.push(e.females/1e6)});var l={},i={},c={},s=function(e,t){return e+t};l[e]=n.reduce(s),i[e]=r.reduce(s),c[e]=o.reduce(s),N.push(l),A.push(i),R.push(c),7===N.length&&7===A.length&&7===R.length&&a.setState({totalPopChartData:a.makeDataForCharts(a.sortPopChartData(N)),totalMalesChartData:a.makeDataForCharts(a.sortPopChartData(A)),totalFemalesChartData:a.makeDataForCharts(a.sortPopChartData(R))},function(){return a.emptyGlobalVariables()})},a.emptyGlobalVariables=function(){N=[],A=[],R=[]},a.makeDataForCharts=function(e){var t=[];return e.forEach(function(e){return Object.entries(e).forEach(function(e){var a=Object(m.a)(e,2),n=a[0],r=a[1];t=[].concat(Object(x.a)(t),[{x:n,y:r}])})}),t},a.sortPopChartData=function(e){var t=e.map(function(e){return JSON.stringify(e)});return t.sort(),t.map(function(e){return JSON.parse(e)})},a.getSelectedCountriesChartData=function(e){[1960,1970,1980,1990,2e3,2010,(new Date).getFullYear()].forEach(function(t){return a.fetchDecadesData(t,e)})},a.getCountries=function(){var e=Object(k.a)({},a.props.growthDaily),t=[];return Object.entries(e).forEach(function(e){var a=Object(m.a)(e,2),n=a[0];a[1];t.push(n)}),a.makeSelectObj(t)},a.makeSelectObj=function(e){var t=[];return e.forEach(function(e){var a={value:e,label:e};t=[].concat(Object(x.a)(t),[a])}),t},a.handleChange=function(e){a.props.selectCountry(Object.values(e)[0]),a.setState({loading:!0},function(){return a.getSelectedCountriesChartData(Object.values(e)[0])})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getSelectedCountriesChartData(this.props.selectedCountry)}},{key:"render",value:function(){var e={table:{border:"1px #000 solid",borderRadius:"10px",padding:"5%",marginLeft:"5%",marginRight:"5%",display:"grid",gridTemplateColumns:"auto auto",paddingRight:"5%"},chart:{display:"inline-block",margin:"0 auto"},h2:{textAlign:"center",gridColumnStart:"1",gridColumnEnd:"3"},h4:{textAlign:"center"},select:{gridColumnStart:"1",gridColumnEnd:"3",width:"50%",marginLeft:"auto",marginRight:"auto"}};return r.a.createElement("div",null,this.props.selectedCountry&&!this.state.loading?r.a.createElement("div",{style:e.table},r.a.createElement("div",{style:e.select},r.a.createElement(S.a,{value:this.state.selectedOption,onChange:this.handleChange,options:this.getCountries(),placeholder:"Select a country...",isSearchable:!0})),r.a.createElement("h2",{style:e.h2},"Charts for ",this.props.selectedCountry,":"),r.a.createElement("div",{style:e.chart,className:"chart"},r.a.createElement("h4",{style:e.h4},"Total population (millions):"),r.a.createElement(C.LineChart,{axes:!0,xTicks:6,yTicks:10,grid:!0,verticalGrid:!0,interpolate:"cardinal",lineColors:["red"],width:580,height:350,data:[this.state.totalPopChartData]})),r.a.createElement("div",{style:e.chart,className:"chart"},r.a.createElement("h4",{style:e.h4},"Females and males (millions):"),r.a.createElement(C.LineChart,{style:e.chart,axes:!0,xTicks:6,yTicks:10,grid:!0,verticalGrid:!0,interpolate:"cardinal",lineColors:["blue","red"],width:580,height:350,data:[this.state.totalMalesChartData,this.state.totalFemalesChartData]}))):r.a.createElement("div",{className:"spinner-wrapper"},r.a.createElement("div",{className:"spinner"},r.a.createElement("span",{className:"fragment"}),r.a.createElement("span",{className:"fragment"}),r.a.createElement("span",{className:"fragment"}),"loading")))}}]),t}(n.Component);function M(){var e=Object(g.a)(["\n  {\n    popGrowthPerDay(country: $country)\n  }\n"]);return M=function(){return e},e}var L=a(272),T=(y()(M()),L.getData());console.log(T);var F=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={countryDataCodes:{},countryDataNames:{},selectedCountry:"",countryClickedOnMap:""},a.countryClickOnMap=function(e){if("XK"!==e){var t=L.getName(e);a.setState({countryClickedOnMap:t},function(){return console.log(a.state.countryClickedOnMap)})}else a.setState({countryClickedOnMap:"Kosovo"},function(){return console.log(a.state.countryClickedOnMap)})},a.selectCountry=function(e){a.setState({selectedCountry:e},function(){return console.log(a.state.selectedCountry)})},a.getCountryNamesArray=function(){var e=[];console.log(T);var t=!0,a=!1,n=void 0;try{for(var r,o=T[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var l=r.value;e.push(l.name)}}catch(i){a=!0,n=i}finally{try{t||null==o.return||o.return()}finally{if(a)throw n}}return e},a.getCountryData=function(e){return a.fetchPopulationData(e)},a.getAllData=function(e){var t=e.length,n=[];e.forEach(function(e){a.getCountryData(e).then(function(e){n.push(e),0===--t&&n&&(console.log(n),n=n.filter(function(e){return void 0!==e||null!==e?0!==Object.keys(e).length:console.log(e)}),a.setState({countryDataCodes:a.getCountryDataCodesObject(n),countryDataNames:a.getCountryDataNamesObject(n)}))})})},a.getCountryDataCodesObject=function(e){var t={};return e=e.map(function(e){return Object.entries(e).forEach(function(e){var a=Object(m.a)(e,2),n=a[0],r=a[1];t[L.getCode(n)]=r.total_population[1].population-r.total_population[0].population+1e3})}),t},a.getCountryDataNamesObject=function(e){var t={};return e=e.map(function(e){return Object.entries(e).forEach(function(e){var a=Object(m.a)(e,2),n=a[0],r=a[1];t[n]=r.total_population[1].population-r.total_population[0].population})}),t},a.fetchPopulationData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Lithuania";return fetch("http://54.72.28.201:80/1.0/population/"+"".concat(e,"/today-and-tomorrow/")).then(function(e){return e.ok?e.json():"no-country-data"}).then(function(t){var a={};return"no-country-data"!==t&&(a[e]=t),a}).catch(function(e){})},a.handleBtnClick=function(){a.setState({selectedCountry:""},function(){return console.log(a.state.selectedCountry)})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getAllData(this.getCountryNamesArray())}},{key:"render",value:function(){var e={div:{marginTop:"100px"}};return r.a.createElement("div",null,Object.keys(this.state.countryDataCodes).length>0?r.a.createElement("div",null,r.a.createElement(D,{mapData:this.state.countryDataCodes,countryClick:this.countryClickOnMap,countryClicked:this.state.countryClickedOnMap}),""!==this.state.selectedCountry?r.a.createElement("div",{style:e.div},r.a.createElement("button",{onClick:this.handleBtnClick,style:e.btn,className:"btn"},"Back to stats"),r.a.createElement(P,{selectedCountry:this.state.selectedCountry,growthDaily:this.state.countryDataNames,selectCountry:this.selectCountry})):r.a.createElement("div",null,r.a.createElement(w,{growthDaily:this.state.countryDataNames,selectCountry:this.selectCountry}))):r.a.createElement("div",{className:"spinner-wrapper"},r.a.createElement("div",{className:"spinner"},r.a.createElement("span",{className:"fragment"}),r.a.createElement("span",{className:"fragment"}),r.a.createElement("span",{className:"fragment"}),"loading")))}}]),t}(n.Component),B=function(){var e={nav:{background:"#000",color:"#d6d0b1",height:"230px",margin:"0 auto 100px 0"},title:{fontSize:"6em",padding:"40px 40px 40px 0px",textAlign:"left",marginTop:"-10px",position:"absolute"},subtitle:{fontSize:"1em",textAlign:"left",paddingLeft:"200px"},img:{height:"auto",width:"250px",marginTop:"20px"},w:{fontSize:"1.4em"}};return r.a.createElement("div",{style:e.nav},r.a.createElement("span",null,r.a.createElement("img",{src:"https://d2t1xqejof9utc.cloudfront.net/screenshots/pics/d8f2a26e920f903d68359038bd4cf588/large.gif",style:e.img,alt:""})),r.a.createElement("span",{style:e.title,className:"title"},r.a.createElement("span",{style:e.w},"W"),"rld"),r.a.createElement("div",{style:e.subtitle,className:"subtitle"},"Data is the first step to sustainable world"))},z=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(B,null),r.a.createElement(F,null))}}]),t}(n.Component),W=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Y(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var V=new i.a({uri:"http://localhost:4000/"});l.a.render(r.a.createElement(c.a,{client:V},r.a.createElement(z,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/world-map",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/world-map","/service-worker.js");W?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Y(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Y(e)})}}()},66:function(e,t,a){}},[[139,1,2]]]);
//# sourceMappingURL=main.c2e0b2fa.chunk.js.map